(this.webpackJsonpcompanies=this.webpackJsonpcompanies||[]).push([[0],{24:function(e,t,n){},28:function(e,t,n){e.exports=n(51)},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(9),l=n(10),s=n(13),m=n(12),u=n(5),E=function(e){return function(t){fetch("https://recruitment.hal.skygate.io/incomes/".concat(e)).then((function(e){return e.json()})).then((function(e){var n,a,r,c=new Date;n=0,r=0,e.incomes.forEach((function(e){new Date(e.date).getMonth()===c.getMonth()-1&&(r+=+e.value),n+=+e.value})),n=Math.round(100*n)/100,r=Math.round(100*r)/100,a=Math.round(n/e.incomes.length*100)/100,t({type:"REQUEST_INCOMES_SUCCESS",payload:{id:e.id,totalIncome:n,averageIncome:a,lastMonthIncome:r}})})).catch((function(e){return t({type:"REQUEST_INCOMES_FAILED",payload:e})}))}},d=n(6),p=n(17),f=n(53),I=n(54),N=function(e,t){return"string"===typeof t&&""!==t?[e,t].filter((function(e){return void 0!==e&&null!==e&&""!==e})).join(" "):t&&t.length?[e].concat(Object(d.a)(t)).filter((function(e){return void 0!==e&&null!==e&&""!==e})).join(" "):e},h=(n(38),function(e){var t=e.children,n=e.value,a=e.classNames,c=N("cell",a);return r.a.createElement("p",{className:c},n,t)}),v=(n(24),function(e){var t=e.id,n=e.name,a=e.city,c=e.totalIncome,o=e.averageIncome,i=e.lastMonthIncome;return r.a.createElement("div",{className:"company-item grid"},r.a.createElement(h,{value:t,classNames:"id"}),r.a.createElement(h,{value:n,classNames:"name"}),r.a.createElement(h,{value:a,classNames:"city"}),r.a.createElement(h,{value:c,classNames:"total-income"}),r.a.createElement(h,{value:o,classNames:"average-income"}),r.a.createElement(h,{value:i,classNames:"last-month-income"}))}),y=(n(39),function(e){var t=e.companies.map((function(e){return r.a.createElement(v,{name:e.name,averageIncome:e.averageIncome?e.averageIncome:"No Data",lastMonthIncome:e.lastMonthIncome?e.lastMonthIncome:"No Data",totalIncome:e.totalIncome?e.totalIncome:"No Data",city:e.city,id:e.id,key:e.id})}));return r.a.createElement("div",{id:"company-list"},t)}),S=n(19),_=(n(40),function(e){var t=e.direction,n=e.handleClick;return r.a.createElement("p",{className:"block",onClick:n,"data-direction":t},r.a.createElement("span",{className:"arrow arrow-".concat(t)}))}),g=(n(41),function(e){var t=e.value,n=e.classNames,a=e.sort;return r.a.createElement("div",{className:"header-cell"},r.a.createElement(h,{value:t,classNames:n}),r.a.createElement(_,{direction:"down",handleClick:a}))}),O=function(e){return e<=1024},T=function(e){var t=e.sort,n=e.isPending,a=r.a.useState(0),c=Object(S.a)(a,2),o=c[0],i=c[1];return r.a.useEffect((function(){i(window.innerWidth)}),[]),r.a.createElement("div",{id:"header-table",className:"grid"},r.a.createElement(g,{value:"id",classNames:["id","REQUEST_COMPANIES_PENDING"===n?"disabled":null],sort:"REQUEST_COMPANIES_PENDING"===n?null:t}),r.a.createElement(g,{value:"name",classNames:["name","REQUEST_COMPANIES_PENDING"===n?"disabled":null],sort:"REQUEST_COMPANIES_PENDING"===n?null:t}),r.a.createElement(g,{value:"city",classNames:["city","REQUEST_COMPANIES_PENDING"===n?"disabled":null],sort:"REQUEST_COMPANIES_PENDING"===n?null:t}),r.a.createElement(g,{value:"total"+(O(o)?"":" income"),classNames:["total-income",""!==n?"disabled":null],sort:""!==n?null:t}),r.a.createElement(g,{value:"average"+(O(o)?"":" income"),classNames:["average-income",""!==n?"disabled":null],sort:""!==n?null:t}),r.a.createElement(g,{value:"last month"+(O(o)?"":" income"),classNames:["last-month-income",""!==n?"disabled":null],sort:""!==n?null:t}))},b=(n(42),function(e){var t=e.children,n=e.classNames,a=e.id,c=N("corners",n);return r.a.createElement("div",{className:c,id:a},t)}),C=(n(43),function(e){var t=e.currentPage,n=e.countPage,a=e.setPage;return r.a.createElement("div",{id:"page-list"},r.a.createElement(_,{direction:"left",handleClick:function(){return a("DECREASE")}}),r.a.createElement("span",null,t," of ",n),r.a.createElement(_,{direction:"right",handleClick:function(){return a("INCREASE")}}))}),M=(n(44),function(e){var t=e.classNames,n=N("spinner",t);return r.a.createElement("div",{className:n})}),P=(n(45),function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={currentPage:1,countPage:1,resultsNumber:10,companies:[],sortType:"",column:""},e.intervalCondition=function(e,t,n){switch(!0){case 0===+t.from&&0!==+t.to:return e.filter((function(e){return+e[n]<+t.to}));case 0===+t.to&&0!==+t.from:return e.filter((function(e){return+e[n]>+t.from}));case+t.from>0&&+t.to>0&&+t.to<+t.from:return e;case+t.from>0&&+t.to>0:return e.filter((function(e){return+e[n]>+t.from&&+e[n]<+t.to}));default:return e}},e.filteredCompanies=function(){var t=e.props,n=t.companies,a=t.id,r=t.name,c=t.city,o=t.averageIncome,i=t.totalIncome,l=t.lastMonthIncome,s=e.state,m=s.sortType,u=s.column,E=Object(p.a)(e),d=E.intervalCondition,f=E.quickSort,I=n.filter((function(e){return e.id.toString().toLowerCase().includes(a.toString().toLowerCase())&&e.name.toLowerCase().includes(r.toLowerCase())&&e.city.toLowerCase().includes(c.toLowerCase())}));return I=d(I,i,"totalIncome"),I=d(I,o,"averageIncome"),I=d(I,l,"lastMonthIncome"),""!==m&&(I=f(I,0,I.length-1,u,m)),e.setState({companies:I}),I},e.setCountPage=function(t){var n=e.state.resultsNumber,a=t.length/n,r=a%1;0!==r&&(a=a-r+1),e.setState({countPage:0===a?1:a,currentPage:1})},e.setDisplayCompanies=function(){var t,n,a=e.state,r=a.resultsNumber,c=a.currentPage;return t=r*c-r,n=r*c,a.companies.slice(t,n)},e.setPage=function(t){var n=e.state,a=n.countPage,r=n.currentPage;"INCREASE"===t&&r<a?e.setState((function(e){return{currentPage:e.currentPage+1}})):"DECREASE"===t&&r>1&&e.setState((function(e){return{currentPage:e.currentPage-1}}))},e.swap=function(e,t,n){var a=e[t];e[t]=e[n],e[n]=a},e.partition=function(t,n,a,r,c,o){for(var i=t[n],l=a,s=a;s<r;s++)("asc"===o&&t[s][c]<i[c]||"desc"===o&&t[s][c]>i[c])&&(e.swap(t,s,l),l++);return e.swap(t,r,l),l},e.quickSort=function(t,n,a,r,c){var o,i;return n<a&&(o=a,i=e.partition(t,o,n,a,r,c),e.quickSort(t,n,i-1,r,c),e.quickSort(t,i+1,a,r,c)),t},e.sort=function(t){var n=t.currentTarget,a=n.previousElementSibling,r=a.className,c=a.classList[1].split("-");c.forEach((function(e,t){return t>0?c[t]=e[0].toUpperCase()+e.slice(1):c[t]})),c=c.join(""),e.setState({column:c});var o=document.querySelector(".".concat(r.replace(" ","."))).nextElementSibling;"down"===n.dataset.direction?(o.dataset.direction="up",o.children[0].classList.replace("arrow-down","arrow-up"),e.setState({sortType:"asc"})):"up"===n.dataset.direction&&(o.dataset.direction="down",o.children[0].classList.replace("arrow-up","arrow-down"),e.setState({sortType:"desc"}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.isPending,c=a.id,o=a.name,i=a.city,l=a.totalIncome,s=a.averageIncome,m=a.lastMonthIncome,u=a.companies,E=this.state,p=E.companies,f=E.sortType,I=E.column,N=this.setCountPage,h=this.filteredCompanies,v=this.quickSort;if("REQUEST_COMPANIES_PENDING"===e.isPending&&(this.setState({companies:Object(d.a)(u)}),N(u)),"REQUEST_INCOMES_PENDING"===e.isPending&&""===r){var y=this.props,S=y.incomes,_=y.companies,g=Object(d.a)(_);g.forEach((function(e){var t=S.find((function(t){return t.id===e.id}));e.averageIncome=t.averageIncome,e.totalIncome=t.totalIncome,e.lastMonthIncome=t.lastMonthIncome})),this.setState({companies:g})}if(e.id===c&&e.name===o&&e.city===i&&e.totalIncome===l&&e.averageIncome===s&&e.lastMonthIncome===m||N(h()),t.sortType!==f||t.column!==I){var O=v(p,0,p.length-1,I,f);this.setState({companies:O})}}},{key:"render",value:function(){var e=this.props.isPending,t=this.state,n=t.currentPage,a=t.countPage,c=this.setDisplayCompanies,o=this.setPage,i=this.sort;return r.a.createElement("div",{id:"company"},r.a.createElement(C,{countPage:a,currentPage:n,setPage:o}),r.a.createElement(b,null,r.a.createElement(T,{sort:i,isPending:e}),r.a.createElement(f.a,{mode:"out-in"},r.a.createElement(I.a,{key:n,addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)},classNames:"blink",timeout:500},r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{companies:c()}),""!==e&&r.a.createElement(M,{classNames:"REQUEST_INCOMES_PENDING"===e?"upon-incomes":null}))))))}}]),n}(a.Component)),R=Object(u.b)((function(e){return{companies:e.requestReducer.companies,incomes:e.requestReducer.incomes,isPending:e.requestReducer.isPending,error:e.requestReducer.error,id:e.filterReducer.id,name:e.filterReducer.name,city:e.filterReducer.city,totalIncome:e.filterReducer.totalIncome,averageIncome:e.filterReducer.averageIncome,lastMonthIncome:e.filterReducer.lastMonthIncome}}),(function(e){return{requestIncome:function(t){return e(E(t))}}}))(P),A=(n(46),function(e){var t=e.id,n=e.name,a=e.type,c=e.label,o=e.disabled,i=e.filter,l=e.actionType,s=r.a.useState(!1),m=Object(S.a)(s,2),u=m[0],E=m[1],d=function(e){var t=e.type;0!==e.target.value.length||"focus"===t?E(!0):"blur"===t&&E(!1)};return r.a.createElement(b,{classNames:["input",o?"disabled":null]},r.a.createElement("label",{htmlFor:n,className:u?"focused":null},c,":"),r.a.createElement("input",{id:t,type:a,name:n,min:0,disabled:o,onChange:function(e){var t=e.target;d(e),i(l,t.value)},onFocus:d,onBlur:d,onBeforeInput:function(e){var t=e.data;if("number"!==e.target.type)return!1;/[0-9]|\./.test(t)||e.preventDefault()}}))}),j=(n(47),function(e){var t=e.filter,n=e.isPending,a=e.className;return r.a.createElement("div",{id:"filter",className:a},r.a.createElement("h2",null,"Filter by:"),r.a.createElement(A,{id:"company-id",name:"company-id",type:"number",label:"ID",disabled:"REQUEST_COMPANIES_PENDING"===n,filter:t,actionType:"SET_FILTER_ID"}),r.a.createElement(A,{id:"company-name",name:"company-name",type:"text",label:"NAME",disabled:"REQUEST_COMPANIES_PENDING"===n,filter:t,actionType:"SET_FILTER_NAME"}),r.a.createElement(A,{id:"company-city",name:"company-city",type:"text",label:"CITY",disabled:"REQUEST_COMPANIES_PENDING"===n,filter:t,actionType:"SET_FILTER_CITY"}),r.a.createElement("p",{className:"label"},"TOTAL INCOME"),r.a.createElement(A,{id:"company-total-income-from",name:"company-total-income-from",type:"number",label:"FROM",disabled:""!==n,filter:t,actionType:"SET_FILTER_TOTAL_INCOME_FROM"}),r.a.createElement(A,{id:"company-total-income-to",name:"company-total-income-to",type:"number",label:"TO",disabled:""!==n,filter:t,actionType:"SET_FILTER_TOTAL_INCOME_TO"}),r.a.createElement("p",{className:"label"},"AVERAGE INCOME"),r.a.createElement(A,{id:"company-average-income-from",name:"company-average-income-from",type:"number",label:"FROM",disabled:""!==n,filter:t,actionType:"SET_FILTER_AVERAGE_INCOME_FROM"}),r.a.createElement(A,{id:"company-average-income-to",name:"company-average-income-to",type:"number",label:"TO",disabled:""!==n,filter:t,actionType:"SET_FILTER_AVERAGE_INCOME_TO"}),r.a.createElement("p",{className:"label"},"LAST MONTH INCOME"),r.a.createElement(A,{id:"company-last-month-income-from",name:"company-last-month-income-from",type:"number",label:"FROM",disabled:""!==n,filter:t,actionType:"SET_FILTER_LAST_MONTH_INCOME_FROM"}),r.a.createElement(A,{id:"company-last-month-income-to",name:"company-last-month-income-to",type:"number",label:"TO",disabled:""!==n,filter:t,actionType:"SET_FILTER_LAST_MONTH_INCOME_TO"}))}),L=(n(48),function(e){var t=e.handleClick,n=e.classNames,a=N("hamburger",n);return r.a.createElement("div",{className:a,onClick:t},r.a.createElement("p",{className:"bar-first"}),r.a.createElement("p",{className:"bar-second"}),r.a.createElement("p",{className:"bar-third"}))}),D=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={close:!1},e.handleClick=function(){e.setState((function(e){return{close:!e.close}}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.innerWidth<=1024&&this.setState({close:!0})}},{key:"render",value:function(){var e=this.props,t=e.filter,n=e.isPending;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{handleClick:this.handleClick,classNames:this.state.close?"":"cross"}),r.a.createElement(j,{filter:t,isPending:n,className:this.state.close?"close":null}))}}]),n}(a.Component),w=Object(u.b)((function(e){return{isPending:e.requestReducer.isPending}}),(function(e){return{filter:function(t,n){return e(function(e,t){return{type:e,payload:t}}(t,n))}}}))(D),F=(n(49),function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.requestCompanies()}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.companies,c=a.requestIncome,o=a.incomes,i=a.requestIncomesPendingEnable,l=a.requestIncomesPendingDisable;e.companies!==r&&(i(),r.forEach((function(e){return c(e.id)}))),o.length>0&&r.length===o.length&&l()}},{key:"render",value:function(){return r.a.createElement("div",{id:"app"},r.a.createElement(w,null),r.a.createElement(R,null))}}]),n}(r.a.Component)),U=Object(u.b)((function(e){return{companies:e.requestReducer.companies,incomes:e.requestReducer.incomes}}),(function(e){return{requestCompanies:function(){return e((function(e){e({type:"REQUEST_COMPANIES_PENDING"}),fetch("https://recruitment.hal.skygate.io/companies").then((function(e){return e.json()})).then((function(t){return e({type:"REQUEST_COMPANIES_SUCCESS",payload:t})})).catch((function(t){return e({type:"REQUEST_COMPANIES_FAILED",payload:t})}))}))},requestIncome:function(t){return e(E(t))},requestIncomesPendingEnable:function(){return e({type:"REQUEST_INCOMES_PENDING",payload:!0})},requestIncomesPendingDisable:function(){return e({type:"REQUEST_INCOMES_PENDING",payload:!1})}}}))(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=n(7),Q=n(1),G={id:"",name:"",city:"",averageIncome:{from:0,to:0},totalIncome:{from:0,to:0},lastMonthIncome:{from:0,to:0}},q={companies:[],incomes:[],isPending:"",error:""},H=n(26),V=(n(50),Object(k.e)(Object(k.c)({requestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_COMPANIES_PENDING":return Object(Q.a)({},e,{isPending:"REQUEST_COMPANIES_PENDING"});case"REQUEST_COMPANIES_FAILED":return Object(Q.a)({},e,{error:t.payload,isPending:""});case"REQUEST_COMPANIES_SUCCESS":return Object(Q.a)({},e,{companies:t.payload,isPending:""});case"REQUEST_INCOMES_PENDING":return Object(Q.a)({},e,{isPending:t.payload?"REQUEST_INCOMES_PENDING":""});case"REQUEST_INCOMES_SUCCESS":var n=Object(d.a)(e.incomes);return n.push(Object(Q.a)({},t.payload)),Object(Q.a)({},e,{incomes:n});case"REQUEST_INCOMES_FAILED":return Object(Q.a)({},e,{error:t.payload,isPending:""});default:return e}},filterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER_ID":return Object(Q.a)({},e,{id:t.payload});case"SET_FILTER_CITY":return Object(Q.a)({},e,{city:t.payload});case"SET_FILTER_NAME":return Object(Q.a)({},e,{name:t.payload});case"SET_FILTER_AVERAGE_INCOME_FROM":return Object(Q.a)({},e,{averageIncome:{from:t.payload,to:e.averageIncome.to}});case"SET_FILTER_LAST_MONTH_INCOME_FROM":return Object(Q.a)({},e,{lastMonthIncome:{from:t.payload,to:e.lastMonthIncome.to}});case"SET_FILTER_TOTAL_INCOME_FROM":return Object(Q.a)({},e,{totalIncome:{from:t.payload,to:e.totalIncome.to}});case"SET_FILTER_AVERAGE_INCOME_TO":return Object(Q.a)({},e,{averageIncome:{to:t.payload,from:e.averageIncome.from}});case"SET_FILTER_LAST_MONTH_INCOME_TO":return Object(Q.a)({},e,{lastMonthIncome:{to:t.payload,from:e.lastMonthIncome.from}});case"SET_FILTER_TOTAL_INCOME_TO":return Object(Q.a)({},e,{totalIncome:{to:t.payload,from:e.totalIncome.from}});default:return e}}}),Object(k.d)(Object(k.a)(H.a))));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:V},r.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.3eed83e6.chunk.js.map